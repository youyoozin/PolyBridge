{% extends "base.html" %}
{% block content %}
<!-- ì±„íŒ…ë°© ì¹´ë“œ(í™ˆê³¼ ë™ì¼) -->
<div class="mb-4">
  <h2 class="mb-3">ì±„íŒ…ë°©</h2>
  <div class="d-flex flex-column overflow-auto gap-3" style="max-height: 500px;">
    <div class="card shadow-sm mb-2" style="width:100%; max-width:400px; margin:0 auto;">
      <div class="card-body d-flex flex-column align-items-center justify-content-center">
        <div class="mb-2" style="font-size:2rem;">ğŸ’¬</div>
        <h5 class="card-title">ë‹¨ì²´ ì±„íŒ…ë°©</h5>
        <a href="/chatroom" class="btn btn-success w-100">ì…ì¥í•˜ê¸°</a>
      </div>
    </div>
    <!-- ìµœê·¼ 1:1 ì±„íŒ…ë°© ì˜ˆì‹œ 5ê°œ -->
    <div class="card shadow-sm mb-2" style="width:100%; max-width:400px; margin:0 auto;">
      <div class="card-body d-flex flex-column align-items-center justify-content-center">
        <div class="mb-2" style="font-size:2rem;">ğŸ‘¤</div>
        <h5 class="card-title">ìµëª… 1:1 ì±„íŒ…ë°©</h5>
        <a href="/chat/room1" class="btn btn-primary w-100">ì…ì¥í•˜ê¸°</a>
      </div>
    </div>
    <div class="card shadow-sm mb-2" style="width:100%; max-width:400px; margin:0 auto;">
      <div class="card-body d-flex flex-column align-items-center justify-content-center">
        <div class="mb-2" style="font-size:2rem;">ğŸ‘¤</div>
        <h5 class="card-title">ìµëª… 1:1 ì±„íŒ…ë°©</h5>
        <a href="/chat/room2" class="btn btn-primary w-100">ì…ì¥í•˜ê¸°</a>
      </div>
    </div>
    <div class="card shadow-sm mb-2" style="width:100%; max-width:400px; margin:0 auto;">
      <div class="card-body d-flex flex-column align-items-center justify-content-center">
        <div class="mb-2" style="font-size:2rem;">ğŸ‘¤</div>
        <h5 class="card-title">ìµëª… 1:1 ì±„íŒ…ë°©</h5>
        <a href="/chat/room3" class="btn btn-primary w-100">ì…ì¥í•˜ê¸°</a>
      </div>
    </div>
    <div class="card shadow-sm mb-2" style="width:100%; max-width:400px; margin:0 auto;">
      <div class="card-body d-flex flex-column align-items-center justify-content-center">
        <div class="mb-2" style="font-size:2rem;">ğŸ‘¤</div>
        <h5 class="card-title">ìµëª… 1:1 ì±„íŒ…ë°©</h5>
        <a href="/chat/room4" class="btn btn-primary w-100">ì…ì¥í•˜ê¸°</a>
      </div>
    </div>
    <div class="card shadow-sm mb-2" style="width:100%; max-width:400px; margin:0 auto;">
      <div class="card-body d-flex flex-column align-items-center justify-content-center">
        <div class="mb-2" style="font-size:2rem;">ğŸ‘¤</div>
        <h5 class="card-title">ìµëª… 1:1 ì±„íŒ…ë°©</h5>
        <a href="/chat/room5" class="btn btn-primary w-100">ì…ì¥í•˜ê¸°</a>
      </div>
    </div>
  </div>
</div>
<!-- ì‹¤ì œ 1:1 ì±„íŒ… UI -->
<div class="container py-4">
  <h2 class="mb-3">ìµëª… 1:1 ì±„íŒ…</h2>
  <div id="chat-box" class="border rounded p-3 mb-3 bg-light" style="height:350px; overflow-y:auto;"></div>
  <form id="chat-form" class="d-flex gap-2">
    <input type="text" id="myname" class="form-control w-25" placeholder="ë‚´ ë‹‰ë„¤ì„" required>
    <input type="text" id="message" class="form-control" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
    <button class="btn btn-primary" type="submit">ì „ì†¡</button>
  </form>
</div>
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script>
  const socket = io();
  const chatBox = document.getElementById('chat-box');
  const room = '{{ username }}';
  socket.emit('join', {room});
  document.getElementById('chat-form').onsubmit = function(e) {
    e.preventDefault();
    const user = document.getElementById('myname').value;
    const msg = document.getElementById('message').value;
    if(user && msg) {
      socket.emit('private_message', {room, user, msg});
      document.getElementById('message').value = '';
    }
  };
  socket.on('message', function(data) {
    const div = document.createElement('div');
    div.innerHTML = `<b>${data.user}:</b> ${data.msg}`;
    chatBox.appendChild(div);
    chatBox.scrollTop = chatBox.scrollHeight;
  });
</script>
{% endblock %}
